import{$ as W,A,Aa as Se,B as d,Ba as Ne,C as le,Ca as Pe,D as P,Da as c,E as k,Ea as ke,F as s,Fa as Ee,G as l,Ga as Te,H as x,Ha as Ve,J as T,K as E,L as p,Na as Re,O as se,Oa as R,P as B,Pa as $,R as u,S as V,T as _,U as z,V as ce,W as ue,X as I,Y as U,Z as me,_ as H,a as K,b as Y,ba as pe,c as J,ca as de,d as L,e as Q,f as X,g as Z,ga as fe,h as j,i as ee,j as q,k as C,ka as ge,l as te,m as S,ma as he,n as N,o as ie,oa as ve,p as ne,pa as D,q as ae,qa as xe,r as G,ra as be,sa as _e,t as oe,ta as Ce,u as r,ua as v,v as b,va as we,w as re,wa as y,x as h,xa as Ie,y as g,z as w,za as ye}from"./chunk-BFWJZXSG.js";var O=(()=>{let i=class i{get elements$(){return this.elementsSubject||(this.elementsSubject=new Y(1),Q([this.palworldVersionService.current$,this.languageService.current$]).pipe(j(([e,a])=>this.palElementsLocalizationService.getPalElementsTexts(a,e)),L(e=>this.elementsSubject.next(e))).subscribe()),this.elementsSubject}constructor(e,a,o){this.palworldVersionService=e,this.languageService=a,this.palElementsLocalizationService=o}element(e){return this.elements$.pipe(L(a=>a[e]))}};i.\u0275fac=function(a){return new(a||i)(G(R),G($),G(xe))},i.\u0275prov=ie({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();function qe(t,i){if(t&1&&x(0,"img",2),t&2){let n=p();se("alt","",n.name," icon"),g("src",n.icon,oe)}}function Ae(t,i){t&1&&(s(0,"div",12),u(1,"?"),l())}function Ue(t,i){if(t&1&&(s(0,"span"),u(1),H(2,"lowercase"),l()),t&2){let n=p();r(),V(W(2,1,n.paldexIndex.suffix))}}function He(t,i){t&1&&(s(0,"span"),u(1,", "),l())}function We(t,i){if(t&1&&(s(0,"span",13),u(1),H(2,"lowercase"),l()),t&2){let n=p().$implicit;r(),V(W(2,1,n.suffix))}}function Ke(t,i){if(t&1&&(h(0,He,2,0,"span"),s(1,"span"),u(2),l(),h(3,We,3,3,"span",6)),t&2){let n=i.$implicit,e=i.$index;d(0,e>0?0:-1),r(2),V(n.index),r(),d(3,n.suffix?3:-1)}}function Ye(t,i){if(t&1&&(s(0,"span",13)(1,"span"),u(2," ("),l(),P(3,Ke,4,3,null,null,le),s(5,"span"),u(6,")"),l()()),t&2){let n=p();r(3),k(n.variantsPaldexIndexes)}}function Je(t,i){if(t&1&&(s(0,"span"),u(1),l()),t&2){let n=p();r(),_("/",n.elementNames[n.elements[1]],"")}}function Qe(t,i){t&1&&x(0,"i",14)}var Me=()=>({"width.px":24,"height.px":24,fill:"#6c757d"});function Xe(t,i){t&1&&x(0,"svg-icon",9),t&2&&g("svgStyle",U(1,Me))}function Ze(t,i){t&1&&x(0,"svg-icon",10),t&2&&g("svgStyle",U(1,Me))}function et(t,i){if(t&1&&u(0),t&2){let n=p();_(" ",n.rarityRange[0]," ")}}function tt(t,i){if(t&1&&u(0),t&2){let n=p();z(" ",n.rarityRange[0]," - ",n.rarityRange[1]," ")}}var je=(()=>{let i=class i{get tribe(){return this._tribe}set tribe(e){this._tribe=e,this.update(e)}constructor(e,a,o,f){this.palsApi=e,this.palworldVersionService=a,this.localizationService=o,this.sanitizer=f,this.elementNames=null,this._tribe=null,this.name="",this.paldexIndex=null,this.variantsPaldexIndexes=[],this.elements=null,this.rarityRange=[0,0],this.hasNocturnalVariant=!1,this.hasBossVariant=!1,this.hasGymBossVariant=!1,this.localizationService.elements$.subscribe(m=>this.elementNames=m)}update(e){let a=e.pals[0],o=e.pals.filter(m=>m.identity.paldexIndex>0).map(m=>({index:m.identity.paldexIndex,suffix:m.identity.paldexIndexSuffix})),f=e.pals.map(m=>m.statistics.rarity).filter(m=>m>0);this.name=e.localizedName??e.name,this.paldexIndex=o.find(m=>!m.suffix)??o[0],this.variantsPaldexIndexes=o.filter(m=>m!=this.paldexIndex),this.elements=[a.element1,a.element2],this.rarityRange=[Math.min(...f),Math.max(...f)],this.hasNocturnalVariant=e.pals.some(m=>m.isNocturnal),this.hasBossVariant=e.pals.some(m=>m.isBoss),this.hasGymBossVariant=e.pals.some(m=>m.isGymBoss),this.loadIcon(e.name)}loadIcon(e){this.icon=void 0,this.palsApi.getIcon(e,_e.Small,this.palworldVersionService.current).pipe(L(a=>a.data),X(a=>(console.error(a),J(void 0)))).subscribe(a=>{if(a){let o=URL.createObjectURL(a);this.icon=this.sanitizer.bypassSecurityTrustUrl(o)}else this.icon=void 0})}};i.\u0275fac=function(a){return new(a||i)(b(D),b(R),b(O),b(ge))},i.\u0275cmp=C({type:i,selectors:[["app-pal-nav-list-item"]],inputs:{tribe:"tribe"},standalone:!0,features:[I],decls:27,vars:11,consts:[[1,"d-flex","align-items-center","gap-3"],[1,"border","border-secondary-subtle","border-2","position-relative",2,"width","64px","height","64px"],["width","100%","height","100%",3,"src","alt"],[1,"d-flex","flex-column"],[1,"d-flex","gap-2","align-items-center"],[1,"fs-6"],["class","text-muted"],[1,"fs-4"],["class","bi bi-moon-fill fs-5 text-secondary","ngbTooltip","Nocturnal"],["src","./assets/icons/chess-queen.svg","ngbTooltip","BOSS",3,"svgStyle"],["src","./assets/icons/tower.svg","ngbTooltip","GYM",3,"svgStyle"],["ngbTooltip","Rarity",1,"bi","bi-star-fill","text-secondary"],[1,"w-100","h-100","d-flex","align-items-center","justify-content-center","fs-2","fw-bold"],[1,"text-muted"],["ngbTooltip","Nocturnal",1,"bi","bi-moon-fill","fs-5","text-secondary"]],template:function(a,o){a&1&&(s(0,"div",0)(1,"div",1),h(2,qe,1,2,"img",2)(3,Ae,2,0),l(),s(4,"div",3)(5,"div",4)(6,"div")(7,"span",5),u(8,"No."),l(),s(9,"span"),u(10),l(),h(11,Ue,3,3,"span")(12,Ye,7,0,"span",6),l(),s(13,"div")(14,"span",7),u(15),l()(),s(16,"div")(17,"span"),u(18),l(),h(19,Je,2,1,"span"),l(),h(20,Qe,1,0,"i",8)(21,Xe,1,2,"svg-icon",9)(22,Ze,1,2,"svg-icon",10),l(),s(23,"div"),x(24,"i",11),h(25,et,1,1)(26,tt,1,2),l()()()),a&2&&(r(2),d(2,o.icon?2:3),r(8),V(o.paldexIndex.index),r(),d(11,o.paldexIndex.suffix?11:-1),r(),d(12,o.variantsPaldexIndexes.length>0?12:-1),r(3),_(" ",o.name,""),r(3),V(o.elementNames[o.elements[0]]),r(),d(19,o.elements[1]?19:-1),r(),d(20,o.hasNocturnalVariant?20:-1),r(),d(21,o.hasBossVariant?21:-1),r(),d(22,o.hasGymBossVariant?22:-1),r(3),d(25,o.rarityRange[0]===o.rarityRange[1]?25:26))},dependencies:[y,fe,Ie,Re],encapsulation:2});let t=i;return t})();function Ge(t,i){return this.value}function it(t,i){if(t&1){let n=T();s(0,"div",1)(1,"input",2),E("change",function(a){let f=S(n).$implicit,m=p(2),F;return N(m.check(f.value,(F=a.target)==null?null:F.checked))}),l(),s(2,"label",3),u(3),l()()}if(t&2){let n=i.$implicit,e=p(2);r(),B("id","",e.label,"-",n.value,"-check"),g("disabled",e.isDisabled)("checked",e.isChecked(n.value)),r(),w("border-primary",e.value!=null)("btn-outline-secondary",e.value==null)("btn-outline-primary",e.value!=null),B("for","",e.label,"-",n.value,"-check"),r(),_(" ",n.label," ")}}function nt(t,i){if(t&1&&(s(0,"label"),u(1),l(),P(2,it,4,13,"div",4,Ge,!0)),t&2){let n=p();A("col-",n.labelCols," col-form-label"),w("text-secondary",n.value==null)("text-primary",n.value!=null),r(),_(" ",n.label," "),r(),k(n.values)}}function at(t,i){if(t&1){let n=T();s(0,"input",2),E("change",function(a){let f=S(n).$implicit,m=p(2),F;return N(m.check(f.value,(F=a.target)==null?null:F.checked))}),l(),s(1,"label",6),u(2),l()}if(t&2){let n=i.$implicit,e=p(2);B("id","",e.label,"-",n.value,"-check"),g("disabled",e.isDisabled)("checked",e.isChecked(n.value)),r(),w("border-primary",e.value!=null)("btn-outline-secondary",e.value==null)("btn-outline-primary",e.value!=null),B("for","",e.label,"-",n.value,"-check"),r(),_(" ",n.label," ")}}function ot(t,i){if(t&1&&(s(0,"div",5)(1,"span"),u(2),l(),P(3,at,3,13,null,null,Ge,!0),l()),t&2){let n=p();r(),A("col-",n.labelCols," input-group-text"),w("text-secondary",n.value==null)("text-primary",n.value!=null)("border-primary",n.value!=null),r(),_(" ",n.label," "),r(),k(n.values)}}var ze=(()=>{let i=class i{constructor(){this.label="",this.values=[],this.labelCols=1,this.skin="buttons",this.multiple=!1,this.isDisabled=!1,this.value=void 0,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(e){this.value=e,this.onChange(this.value),this.onTouched(this.value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}isChecked(e){return this.multiple?this.value?.includes(e):this.value===e}check(e,a){if(this.multiple){if(a&&(!this.value||!this.value.includes(e)))this.value=[...this.value??[],e];else if(!a&&this.value&&this.value.includes(e)){let o=this.value.filter(f=>f!=e);this.value=o.length==0?void 0:o}}else this.value=a?e:void 0;this.onChange(this.value),this.onTouched(this.value)}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=C({type:i,selectors:[["app-radio-row-control"]],inputs:{label:"label",values:"values",labelCols:[q.HasDecoratorInputTransform,"labelCols","labelCols",de],skin:"skin",multiple:[q.HasDecoratorInputTransform,"multiple","multiple",pe]},standalone:!0,features:[ue([{provide:ye,useExisting:ae(()=>i),multi:!0}]),re,I],decls:3,vars:1,consts:[[1,"row","mb-3"],[1,"col"],["type","checkbox","autocomplete","off",1,"btn-check",3,"id","disabled","checked","change"],[1,"w-100","btn","btn-outline-secondary","text-truncate","text-capitalize",3,"for"],["class","col"],[1,"input-group","justify-content-center"],[1,"btn","text-truncate","text-capitalize",3,"for"]],template:function(a,o){if(a&1&&(s(0,"div",0),h(1,nt,4,8)(2,ot,5,10),l()),a&2){let f;r(),d(1,(f=o.skin)==="buttons"?1:f==="input-group"?2:-1)}},styles:["[_nghost-%COMP%]{display:contents}"]});let t=i;return t})();var De=(()=>{let i=class i{constructor(e){this.filtersChange=new ee,this.elementTypes=[],this.rarities=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10}],this.ternary=[{label:"yes",value:!0},{label:"no",value:!1}],this.form=new Pe({sizes:new c(void 0,{nonNullable:!0}),elementTypes:new c(void 0,{nonNullable:!0}),hasNocturnalVariant:new c(void 0,{nonNullable:!0}),hasEdibleVariant:new c(void 0,{nonNullable:!0}),hasPredatorVariant:new c(void 0,{nonNullable:!0}),hasBossVariant:new c(void 0,{nonNullable:!0}),hasGymBossVariant:new c(void 0,{nonNullable:!0}),rarity:new c(void 0,{nonNullable:!0}),minKindling:new c(void 0,{nonNullable:!0}),maxKindling:new c(void 0,{nonNullable:!0}),minWatering:new c(void 0,{nonNullable:!0}),maxWatering:new c(void 0,{nonNullable:!0}),minPlanting:new c(void 0,{nonNullable:!0}),maxPlanting:new c(void 0,{nonNullable:!0}),minGeneratingElectricity:new c(void 0,{nonNullable:!0}),maxGeneratingElectricity:new c(void 0,{nonNullable:!0}),minHandwork:new c(void 0,{nonNullable:!0}),maxHandwork:new c(void 0,{nonNullable:!0}),minGathering:new c(void 0,{nonNullable:!0}),maxGathering:new c(void 0,{nonNullable:!0}),minLumbering:new c(void 0,{nonNullable:!0}),maxLumbering:new c(void 0,{nonNullable:!0}),minMining:new c(void 0,{nonNullable:!0}),maxMining:new c(void 0,{nonNullable:!0}),minOilExtraction:new c(void 0,{nonNullable:!0}),maxOilExtraction:new c(void 0,{nonNullable:!0}),minMedicineProduction:new c(void 0,{nonNullable:!0}),maxMedicineProduction:new c(void 0,{nonNullable:!0}),minCooling:new c(void 0,{nonNullable:!0}),maxCooling:new c(void 0,{nonNullable:!0}),minTransporting:new c(void 0,{nonNullable:!0}),maxTransporting:new c(void 0,{nonNullable:!0}),minFarming:new c(void 0,{nonNullable:!0}),maxFarming:new c(void 0,{nonNullable:!0})}),e.elements$.subscribe(a=>{this.elementTypes=Object.entries(a).filter(([o,f])=>o!==be.Unknown).map(([o,f])=>({label:f,value:o}))})}ngOnInit(){this.form.valueChanges.subscribe(e=>this.filtersChange.emit(new Ce({sizes:e.sizes,elements:e.elementTypes,hasNocturnalVariant:e.hasNocturnalVariant,hasPredatorVariant:e.hasPredatorVariant,hasEdibleVariant:e.hasEdibleVariant,hasBossVariant:e.hasBossVariant,hasGymBossVariant:e.hasGymBossVariant,rarity:new v({fromInclusive:e.rarity,toInclusive:e.rarity}),workSuitability:new we({kindling:new v({fromInclusive:e.minKindling,toInclusive:e.maxKindling}),watering:new v({fromInclusive:e.minWatering,toInclusive:e.maxWatering}),planting:new v({fromInclusive:e.minPlanting,toInclusive:e.maxPlanting}),generatingElectricity:new v({fromInclusive:e.minGeneratingElectricity,toInclusive:e.maxGeneratingElectricity}),handwork:new v({fromInclusive:e.minHandwork,toInclusive:e.maxHandwork}),gathering:new v({fromInclusive:e.minGathering,toInclusive:e.maxGathering}),lumbering:new v({fromInclusive:e.minLumbering,toInclusive:e.maxLumbering}),mining:new v({fromInclusive:e.minMining,toInclusive:e.maxMining}),oilExtraction:new v({fromInclusive:e.minOilExtraction,toInclusive:e.maxOilExtraction}),medicineProduction:new v({fromInclusive:e.minMedicineProduction,toInclusive:e.maxMedicineProduction}),cooling:new v({fromInclusive:e.minCooling,toInclusive:e.maxCooling}),transporting:new v({fromInclusive:e.minTransporting,toInclusive:e.maxTransporting}),farming:new v({fromInclusive:e.minFarming,toInclusive:e.maxFarming})})})))}};i.\u0275fac=function(a){return new(a||i)(b(O))},i.\u0275cmp=C({type:i,selectors:[["app-browse-pals-filters"]],outputs:{filtersChange:"filtersChange"},standalone:!0,features:[I],decls:8,vars:10,consts:[[3,"formGroup"],["label","Elements","multiple","",3,"formControl","values"],["label","Rarity",3,"formControl","values"],[1,"row"],[1,"col"],["skin","input-group","label","Nocturnal","multiple","",3,"formControl","labelCols","values"],["skin","input-group","label","GYM","labelCols","4",3,"formControl","values"]],template:function(a,o){a&1&&(s(0,"form",0),x(1,"app-radio-row-control",1)(2,"app-radio-row-control",2),s(3,"div",3)(4,"div",4),x(5,"app-radio-row-control",5),l(),s(6,"div",4),x(7,"app-radio-row-control",6),l()()()),a&2&&(g("formGroup",o.form),r(),g("formControl",o.form.controls.elementTypes)("values",o.elementTypes),r(),g("formControl",o.form.controls.rarity)("values",o.rarities),r(3),g("formControl",o.form.controls.hasNocturnalVariant)("labelCols",4)("values",o.ternary),r(2),g("formControl",o.form.controls.hasGymBossVariant)("values",o.ternary))},dependencies:[y,Ve,ke,Se,Ne,Ee,Te,ze],encapsulation:2});let t=i;return t})();var rt=(t,i)=>i.name;function lt(t,i){if(t&1&&u(0),t&2){let n=p(3);ce(" ",n.currentPageRange[0],"..",n.currentPageRange[1]," / ",n.result.pagination.totalCount," results ")}}function st(t,i){if(t&1&&u(0),t&2){let n=p(3);_(" ",n.result.results.length," results ")}}function ct(t,i){if(t&1&&h(0,lt,1,3)(1,st,1,1),t&2){let n=p(2);d(0,n.result.results.length<n.result.pagination.totalCount?0:1)}}var ut=t=>["..",t];function mt(t,i){if(t&1&&(s(0,"a",6),x(1,"app-pal-nav-list-item",7),l()),t&2){let n=i.$implicit;g("routerLink",me(2,ut,n.name)),r(),g("tribe",n)}}function pt(t,i){if(t&1){let n=T();s(0,"nav",8)(1,"ul",9)(2,"li",10)(3,"a",11),E("click",function(){S(n);let a=p(2);return N(a.previousPage())}),u(4,"Previous"),l()(),s(5,"li",12),u(6),l(),s(7,"li",10)(8,"a",11),E("click",function(){S(n);let a=p(2);return N(a.nextPage())}),u(9,"Next"),l()()()()}if(t&2){let n=p(2);r(2),w("disabled",n.result.pagination.pageNumber<=1),r(4),z(" ",n.result.pagination.pageNumber," / ",n.result.pagination.totalPages," "),r(),w("disabled",n.result.pagination.pageNumber>=n.result.pagination.totalPages)}}function dt(t,i){if(t&1){let n=T();s(0,"div",0)(1,"h5"),u(2,"Filters"),l(),s(3,"div",1)(4,"app-browse-pals-filters",2),E("filtersChange",function(a){S(n);let o=p();return o.onFiltersChange(a),N(o.refresh())}),l()()(),s(5,"div",3),h(6,ct,2,1),l(),s(7,"div",4),P(8,mt,2,4,"a",13,rt),l(),h(10,pt,10,6,"nav",5)}if(t&2){let n=p();r(6),d(6,n.result?6:-1),r(2),k(n.result.results),r(2),d(10,n.result.pagination.totalPages>1?10:-1)}}var $e=(()=>{let i=class i{constructor(e,a,o){this.palworldVersionService=e,this.languageService=a,this.palsApi=o,this.currentPageRange=[0,0],this.searchRequest={pagination:{pageNumber:1,pageSize:10}},this.searchRequestSubject=new K}ngOnInit(){this.searchRequestSubject.pipe(Z(250),j(e=>this.search(e.filters,e.pagination))).subscribe(e=>{this.result=e,this.currentPageRange=[(e.pagination.pageNumber-1)*e.pagination.pageSize+1,Math.min(e.pagination.pageNumber*e.pagination.pageSize,e.pagination.totalCount)]}),this.refresh()}refresh(){this.searchRequestSubject.next(this.searchRequest)}nextPage(){console.log(this.result,this.searchRequest);let e=this.searchRequest.pagination.pageNumber??1;this.result?.pagination&&e>=this.result.pagination.totalPages||(this.searchRequest.pagination.pageNumber=e+1,this.refresh())}previousPage(){let e=this.searchRequest.pagination.pageNumber??1;e<=1||(this.searchRequest.pagination.pageNumber=e-1,this.refresh())}onFiltersChange(e){this.searchRequest.filters=e,this.searchRequest.pagination.pageNumber=1}search(e,a){return this.palsApi.searchTribes(e?.sizes,e?.elements,e?.hasNocturnalVariant,e?.hasEdibleVariant,e?.hasPredatorVariant,e?.hasBossVariant,e?.hasGymBossVariant,e?.rarity?.fromInclusive,e?.rarity?.toInclusive,e?.workSuitability?.kindling?.fromInclusive,e?.workSuitability?.kindling?.toInclusive,e?.workSuitability?.watering?.fromInclusive,e?.workSuitability?.watering?.toInclusive,e?.workSuitability?.planting?.fromInclusive,e?.workSuitability?.planting?.toInclusive,e?.workSuitability?.generatingElectricity?.fromInclusive,e?.workSuitability?.generatingElectricity?.toInclusive,e?.workSuitability?.handwork?.fromInclusive,e?.workSuitability?.handwork?.toInclusive,e?.workSuitability?.gathering?.fromInclusive,e?.workSuitability?.gathering?.toInclusive,e?.workSuitability?.lumbering?.fromInclusive,e?.workSuitability?.lumbering?.toInclusive,e?.workSuitability?.mining?.fromInclusive,e?.workSuitability?.mining?.toInclusive,e?.workSuitability?.oilExtraction?.fromInclusive,e?.workSuitability?.oilExtraction?.toInclusive,e?.workSuitability?.medicineProduction?.fromInclusive,e?.workSuitability?.medicineProduction?.toInclusive,e?.workSuitability?.cooling?.fromInclusive,e?.workSuitability?.cooling?.toInclusive,e?.workSuitability?.transporting?.fromInclusive,e?.workSuitability?.transporting?.toInclusive,e?.workSuitability?.farming?.fromInclusive,e?.workSuitability?.farming?.toInclusive,a.pageNumber,a.pageSize,this.languageService.current,this.palworldVersionService.current)}};i.\u0275fac=function(a){return new(a||i)(b(R),b($),b(D))},i.\u0275cmp=C({type:i,selectors:[["app-browse-pals-page"]],standalone:!0,features:[I],decls:3,vars:1,consts:[[1,"mb-4"],[1,"ps-2"],[3,"filtersChange"],[1,"mb-2"],[1,"list-group","list-group-flush"],["class","mt-4"],[1,"list-group-item","list-group-item-action",3,"routerLink"],[3,"tribe"],[1,"mt-4"],[1,"pagination","align-items-center","justify-content-center"],[1,"page-item"],["role","button",1,"page-link","user-select-none",3,"click"],[1,"page-link"],["class","list-group-item list-group-item-action",3,"routerLink"]],template:function(a,o){a&1&&(s(0,"h1"),u(1,"Pals"),l(),h(2,dt,11,2)),a&2&&(r(2),d(2,o.result?2:-1))},dependencies:[y,he,je,De],encapsulation:2});let t=i;return t})();var ft=[{path:"",pathMatch:"full",redirectTo:"browse"},{path:"browse",component:$e}],Wt=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=te({type:i}),i.\u0275inj=ne({providers:[ve(ft)],imports:[y]});let t=i;return t})();export{Wt as PalsModule};
